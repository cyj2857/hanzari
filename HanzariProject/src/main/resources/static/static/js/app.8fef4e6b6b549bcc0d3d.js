webpackJsonp([1],{0:function(e,t){},1:function(e,t){},2:function(e,t){},"2WXQ":function(e,t){},"6j+j":function(e,t){},"7duE":function(e,t){},"7zck":function(e,t){},IXXF:function(e,t){},NHnr:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("7+uW"),l=o("mtWM"),n=o.n(l),i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("v-app",{attrs:{id:"app"}},[t("div",{attrs:{id:"routerLink"}},[t("v-card",[t("v-tabs",{attrs:{"background-color":"primary",dark:""}},[t("v-tab",{attrs:{to:"/hyoriTest"}},[this._v("Admin")]),this._v(" "),t("v-tab",{attrs:{to:"/yunjiTest"}},[this._v("Manager")]),this._v(" "),t("v-tab",{attrs:{to:"/YujinTest"}},[this._v("Viewer")])],1)],1),this._v(" "),t("router-view")],1)])},staticRenderFns:[]};var s=o("VU/8")({name:"App"},i,!1,function(e){o("IXXF")},null,null).exports,r=o("/ocq"),c=o("tsU9"),h=o.n(c),d={props:["employee"],data:function(){return{allEmployeeSeatMap:null,search:"",headers:[{text:"Name",align:"start",sortable:!0,value:"name"},{text:"Department",value:"department"},{text:"Number",value:"number"},{text:"",value:"createSeatButton"},{text:"",value:"showSeatButton"}],employees:this.employee,userAuthority:"Viewer",disabledValue:null}},created:function(){var e=this;P.$on("eachEmployeeSeatMap",function(t){e.allEmployeeSeatMap=t})},methods:{showSeatButtonClicked:function(e){if(this.allEmployeeSeatMap)for(var t=0;t<this.employees.length;t++)if(this.employees[t].employee_id==e.employee_id){var o=this.allEmployeeSeatMap.get(e.employee_id);console.log(o+"eachEmployeeSeatList"),o&&(console.log(this.employees[t].employee_id+"employee_id? length"+o.length),console.log(this.employees[t].name),this.employees[t].seatIdList=o,console.log(this.employees[t].seatIdList),P.$emit("showSeatDataTable",this.employees[t]))}},MappingSeatButtonClicked:function(e){P.$emit("MappingSeat",e)}}},u={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-card",[o("v-card-title",[o("v-spacer"),e._v(" "),o("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),o("v-data-table",{attrs:{headers:e.headers,items:e.employees,search:e.search,height:"265px"},scopedSlots:e._u([{key:"item",fn:function(t){return[o("tr",[o("td",[e._v(e._s(t.item.name))]),e._v(" "),o("td",[e._v(e._s(t.item.department))]),e._v(" "),o("td",[e._v(e._s(t.item.number))]),e._v(" "),o("td",[o("v-btn",{attrs:{id:"showSeatButton"},on:{click:function(o){return e.showSeatButtonClicked(t.item)}}},[e._v("Show")])],1),e._v(" "),o("td",[o("v-btn",{attrs:{id:"MappingSeatButton"},on:{click:function(o){return e.MappingSeatButtonClicked(t.item)}}},[e._v("Mapping")])],1)])]}}])})],1)},staticRenderFns:[]};var m=o("VU/8")(d,u,!1,function(e){o("6j+j")},"data-v-49d5469e",null).exports,p=o("mvHQ"),f=o.n(p),g=o("ifoU"),v=o.n(g),_={props:{dialogStatus:{type:Boolean}},data:function(){return{employee_id:"",floor_id:"",employee_name:""}},computed:{dialog:function(){return this.dialogStatus}},created:function(){var e=this;P.$on("employee_id",function(t){e.employee_id=t}),P.$on("floor_id",function(t){e.floor_id=t}),P.$on("employee_name",function(t){e.employee_name=t})}},y={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-dialog",{attrs:{"max-width":"290",value:e.dialog,persistent:""}},[o("v-form",{ref:"form",attrs:{"lazy-validation":""}},[o("v-card",[e.employee_id?[o("v-card-title",[e._v("\n          "+e._s(this.employee_name)+" Employee\n        ")]),e._v(" "),o("v-card-text",[e._v("\n          Name :"+e._s(this.employee_name)+"\n          Id : "+e._s(this.employee_id)+" \n          Floor : "+e._s(this.floor_id)+" \n        ")])]:[o("v-card-title",[e._v("\n          Vacant Seat\n        ")])],e._v(" "),o("v-card-actions",[o("v-spacer"),e._v(" "),o("v-btn",{on:{click:function(t){return e.$emit("close")}}},[e._v("Close")])],1)],2)],1)],1)},staticRenderFns:[]},S=o("VU/8")(_,y,!1,null,null,null).exports,b={props:{dialogStatus:{type:Boolean}},data:function(){return{inputFloor:null,inputXLocation:null,inputYLocation:null}},created:function(){var e=this;P.$on("initChangeSeatDialog",function(t){e.inputFloor=t,e.inputXLocation=t,e.inputYLocation=t})},computed:{dialog:function(){return this.dialogStatus}},methods:{test:function(){},confirm:function(){if(null!=this.inputFloor&&null!=this.inputXLocation&&null!=this.inputYLocation){var e=new Array;e.push(this.inputFloor),e.push(this.inputXLocation),e.push(this.inputYLocation),P.$emit("confirmChangeSeatDialog",e)}}}},F={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-dialog",{attrs:{"max-width":"500",value:e.dialog,persistent:""}},[o("v-form",{ref:"form",attrs:{"lazy-validation":""}},[o("v-card",[[o("v-card-title",[e._v(" ChangeSeat ")]),e._v(" "),o("v-card-text",[o("v-container",[o("v-row",[o("v-col",{attrs:{cols:"12"}},[o("v-text-field",{attrs:{label:"Floor*",required:""},model:{value:e.inputFloor,callback:function(t){e.inputFloor=t},expression:"inputFloor"}})],1),e._v(" "),o("v-col",{attrs:{cols:"12"}},[o("v-text-field",{attrs:{label:"X location*",required:""},model:{value:e.inputXLocation,callback:function(t){e.inputXLocation=t},expression:"inputXLocation"}})],1),e._v(" "),o("v-col",{attrs:{cols:"12"}},[o("v-text-field",{attrs:{label:"Y location*",required:""},model:{value:e.inputYLocation,callback:function(t){e.inputYLocation=t},expression:"inputYLocation"}})],1)],1)],1)],1)],e._v(" "),o("v-card-actions",[o("v-spacer"),e._v(" "),o("v-btn",{on:{click:e.test}},[e._v("test")]),e._v(" "),o("v-btn",{on:{click:e.confirm}},[e._v("Confirm")]),e._v(" "),o("v-btn",{on:{click:function(t){return e.$emit("close")}}},[e._v("Close")])],1)],2)],1)],1)},staticRenderFns:[]},E={props:["seat","employee"],components:{EmployeeDialog:S,AllFloorsDataTable:m,ChangeSeatDialog:o("VU/8")(b,F,!1,null,null,null).exports},data:function(){return{floorCanvas:null,floorImageList:null,seatId:null,currentSelectedFloor:null,eachFloorSeatMap:null,createSeatMap:null,deleteSeatMap:null,eachEmployeeSeatMap:null,employeeDialogStatus:!1,changeSeatDialogStatus:!1,inputChangeSeatFloor:null,inputChangeSeatX:null,inputChangeSeatY:null,allEmployeeList:[],seats:this.seat,employees:this.employee,items:[{number:2},{number:4},{number:6},{number:8}],allFloorItems:[]}},created:function(){var e=this;P.$on("confirmChangeSeatDialog",function(t){e.confirmChangeSeatDialog(t)}),P.$on("showSeat",function(t){e.showSeat(t)}),P.$on("changeFloor",function(t){e.currentSelectedFloor=t,e.changeFloor(e.currentSelectedFloor),console.log(e.currentSelectedFloor+"여기가 현재층")}),P.$on("allEmployeeList",function(t){e.allEmployeeList=t}),P.$on("MappingSeat",function(t){e.setVacantSeat(t)}),P.$on("allFloorItems",function(t){e.allFloorItems=t,console.log("in AttachCanvas"),console.log(e.allFloorItems)}),null==this.floorImageList&&(this.floorImageList=new v.a),null==this.eachFloorSeatMap&&(this.eachFloorSeatMap=new v.a),null==this.eachEmployeeSeatMap&&(this.eachEmployeeSeatMap=new v.a)},mounted:function(){this.initializing()},methods:{test:function(){var e=this.getEachFloorSeatList(this.currentSelectedFloor);console.log(e)},getEmployeeDialog:function(){this.employeeDialogStatus=!0,console.log(this.employeeDialogStatus)},closeEmployeeDialog:function(){console.log("<<<close dialog>>>"),this.employeeDialogStatus=!1,console.log(this.employeeDialogStatus)},getChangeSeatDialog:function(){P.$emit("initChangeSeatDialog",null),this.changeSeatDialogStatus=!0,console.log(this.changeSeatDialogStatus)},closeChangeSeatDialog:function(){console.log("<<<close dialog>>>"),this.changeSeatDialogStatus=!1,console.log(this.changeSeatDialogStatus)},confirmChangeSeatDialog:function(e){if(console.log("<<<confirm dialog>>>"),this.changeSeatDialogStatus=!1,this.floorCanvas.getActiveObject()){var t=this.getEachFloorSeatList(this.currentSelectedFloor),o=this.floorCanvas.getActiveObject();o.floor_id=e[0],o.left=parseInt(e[1]),o.top=parseInt(e[2]);for(var a=0;a<t.length;a++)t[a].seatId==o.seatId&&t.splice(a,1);console.log("after delete"),console.log(t.length);var l=this.getEachFloorSeatList(e[0]);l.push(o),P.$emit("showSeatFloor",e[0]),P.$emit("eachFloorSeatList",l),this.floorCanvas.renderAll()}},initializing:function(){var e=this;if(null==this.floorCanvas){var t=this.$refs.canvas;this.floorCanvas=new fabric.Canvas(t,{fireRightClick:!0,fireMiddleClick:!0,stopContextMenu:!0}),this.floorCanvas.on("mouse:wheel",function(t){if(e.floorCanvas.viewportTransform){if(!0===t.e.ctrlKey){var o=t.e,a=o.deltaY,l=e.floorCanvas.getZoom();(l-=a/300)>20&&(l=20),l<1&&(l=.95),e.floorCanvas.zoomToPoint(new fabric.Point(o.offsetX,o.offsetY),l)}else e.floorCanvas.setViewportTransform([1,0,0,1,0,0]);t.e.preventDefault(),t.e.stopPropagation()}})}},clickResetToRatio:function(){this.floorCanvas.setViewportTransform([1,0,0,1,0,0])},getSeatUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},multipleVacant:function(e){this.addVacantBtn(e)},changeFloor:function(e){var t=this;this.floorCanvas.getObjects().slice().forEach(function(e){t.floorCanvas.remove(e)});var o=this.getEachFloorSeatList(e);if(null!=this.floorImageList.get(e)){if(this.loadImage(this.floorImageList.get(e)),o){for(var a=0;a<o.length;a++)this.floorCanvas.add(o[a]),console.log("myOnefloorSeatList : "),console.log(o[a]);P.$emit("eachFloorSeatList",o)}}else null==this.floorImageList.get(e)&&(this.floorCanvas.getObjects().slice().forEach(function(e){t.floorCanvas.remove(e)}),this.floorCanvas.backgroundImage=0,this.floorCanvas.backgroundColor="aliceblue",this.floorCanvas.renderAll(),P.$emit("eachFloorSeatList",o))},onFileChange:function(e){var t=e.target.files||e.dataTransfer.files;t.length&&this.createImage(t[0])},createImage:function(e){this.loadImage(e),this.saveImage(e)},loadImage:function(e){var t=this,o=new FileReader;o.onload=function(e){fabric.Image.fromURL(e.target.result,function(e){e.set({scaleX:t.floorCanvas.width/e.width,scaleY:t.floorCanvas.height/e.height}),t.floorCanvas.setBackgroundImage(e,t.floorCanvas.renderAll.bind(t.floorCanvas))})},o.readAsDataURL(e)},saveImage:function(e){this.floorImageList.set(this.currentSelectedFloor,e),console.log("floorImageList : "),console.log(this.floorImageList.get(this.currentSelectedFloor))},getColor:function(e){return"부서1"==e?"orange":"부서2"==e?"yellow":"부서3"==e?"green":"Gray"},showSeat:function(e){var t=this;console.log(e.seat_id+"가 해당 자리의 아이디입니다.");var o=void 0;o=this.currentSelectedFloor!=e.floor_id?e.floor_id:this.currentSelectedFloor;for(var a=this.getEachFloorSeatList(o),l=function(l){var n=a[l],i=n.toObject(["employee_id","floor_id","seatId","employee_department"]);console.log(i.floor_id+"층에 자리가 있습니다.");var s=i.seatId+"번";if(e.seat_id==s){if(console.log("hihi"),t.floorCanvas.getObjects().slice().forEach(function(e){t.floorCanvas.remove(e)}),null!=t.floorImageList.get(o)){t.loadImage(t.floorImageList.get(o));for(var r=0;r<a.length;r++)t.floorCanvas.add(a[r])}n.item(0).animate("fill","red",{onChange:t.floorCanvas.renderAll.bind(t.floorCanvas),duration:2e3,onComplete:function(){console.log(c),n.item(0).set("fill",c)}});var c=t.getColor(i.employee_department)}},n=0;n<a.length;n++)l(n)},getEachFloorSeatList:function(e){if(this.eachFloorSeatMap.get(e))return console.log(this.eachFloorSeatMap.size+"현재 자리 맵 사이즈입니다"),this.eachFloorSeatMap.get(e);var t=new Array;return this.eachFloorSeatMap.set(e,t),console.log(this.eachFloorSeatMap.size+"처음의 자리 맵 사이즈입니다"),this.eachFloorSeatMap.get(e)},getEachEmployeeSeatList:function(e){if(this.eachEmployeeSeatMap.get(e))return this.eachEmployeeSeatMap.get(e);var t=new Array;return this.eachEmployeeSeatMap.set(e,t),this.eachEmployeeSeatMap.get(e)},clickChangeToVacant:function(){var e=null,t=this.getEachFloorSeatList(this.currentSelectedFloor);if(this.floorCanvas.getActiveObject()){if("group"==this.floorCanvas.getActiveObject().type){(e=this.floorCanvas.getActiveObject()).employee_name=null,e.employee_department=null,e.employee_number=null;var o=e.toObject(["seatId","employee_id"]);console.log(o.seatId+"비우고자하는 자리의 SeatId입니다."),console.log(o.employee_id+"비우고자하는 자리의 employee_id입니다."),this.deleteEachEmployeeSeatList(o),e.employee_id=null,e.item(0).set("fill",this.getColor(e.employee_department)),this.floorCanvas.remove(e.item(1)),e._objects[1].text="",this.floorCanvas.renderAll()}P.$emit("eachFloorSeatList",t),P.$emit("eachEmployeeSeatMap",this.eachEmployeeSeatMap)}},deleteEachFloorSeatList:function(e){return this.getEachFloorSeatList(e).length=0,this.getEachFloorSeatList(e)},deleteEachEmployeeSeatList:function(e){for(var t=this.getEachEmployeeSeatList(e.employee_id),o=0;o<t.length;o++)t[o]==e.seatId&&t.splice(o,1);console.log(t.length+"전체 삭제한 자리 리스트 길이입니다.")},deleteAllBtn:function(){var e=this;if(confirm("Are you sure?")){this.floorCanvas.getObjects().slice().forEach(function(t){e.floorCanvas.remove(t);var o=t.toObject(["seatId","employee_id"]);e.deleteEachEmployeeSeatList(o)});var t=this.deleteEachFloorSeatList(this.currentSelectedFloor);t?alert("success"):alert("fail"),P.$emit("eachFloorSeatList",t),P.$emit("eachEmployeeSeatMap",this.eachEmployeeSeatMap)}},deleteBtn:function(){var e=null,t=this.getEachFloorSeatList(this.currentSelectedFloor),o=new Array;if(confirm("Are you sure?")){if(1==this.floorCanvas.getActiveObjects().length){e=this.floorCanvas.getActiveObject(),console.log("단일객체 선택");var a=e.toObject(["seatId","employee_id"]);this.deleteEachEmployeeSeatList(a)}else{e=this.floorCanvas.getActiveObjects(),console.log("복수객체 선택");for(var l=0;l<e.length;l++){var n=e[l].toObject(["seatId","employee_id"]);this.deleteEachEmployeeSeatList(n)}e=this.floorCanvas.getActiveObject().toGroup()}this.floorCanvas.getObjects().slice().forEach(function(e){o.push(e)}),e&&(o.slice().forEach(function(t){if(t==e){var a=o.indexOf(e);o.splice(a,1)}}),this.floorCanvas.remove(e),t.length=0,this.eachFloorSeatMap.set(this.currentSelectedFloor,o),P.$emit("eachFloorSeatList",this.getEachFloorSeatList(this.currentSelectedFloor)),P.$emit("eachEmployeeSeatMap",this.eachEmployeeSeatMap))}},addVacantBtn:function(e){var t=this,o=[{left:50,top:100},{left:125,top:100},{left:50,top:200},{left:125,top:200},{left:200,top:100},{left:200,top:200},{left:275,top:100},{left:275,top:200}];if(this.vacantnumber=2==e|4==e|6==e|8==e?e:1,!this.floorImageList.get(this.currentSelectedFloor))return alert("도면 이미지가 없습니다"),void console.log(this.getEachFloorSeatList(this.currentSelectedFloor));var a=this.getEachFloorSeatList(this.currentSelectedFloor);console.log("currnet floor is "+this.currentSelectedFloor);for(var l=function(e){t.seatid=t.getSeatUUID();var l=o[e],n=[],i=new fabric.Rect({width:100,height:100,fill:t.getColor(null),opacity:1}),s=new fabric.IText("",{left:0,top:i.height/3,fontSize:13,fill:"black"});function r(t){var o=t.target,a=o.toObject(["width","height","scaleX","scaleY"]);o.set("scaleX",a.scaleX),o.set("scaleY",a.scaleY),console.log(a.width*a.scaleX+"저장할 width"),console.log(n[e].scaleX+"그룹의 스케일엑스"),console.log(a.height*a.scaleY+"저장할 height")}function r(e){var t=e.target;console.log("Width =  "+t.getScaledWidth()),console.log("X =  "+t.scaleX),console.log("Height = "+t.getScaledHeight());var o=t.getScaledWidth()/t.scaleX,a=t.getScaledHeight()/t.scaleY;t.width=o,t.height=a;var l=t.toObject(["width","height","scaleX","scaleY"]);console.log(l.width*l.scaleX+"저장할 width"),console.log(l.height*l.scaleY+"저장할 height")}n[e]=new fabric.Group([i,s],{floor_id:t.currentSelectedFloor,seatId:t.seatid,employee_name:null,employee_department:null,employee_number:null,employee_id:null,left:l.left,top:l.top,angle:0}),t.floorCanvas.on("object:scaling",r),n[e].on("mousedown",function(e){var o=e.target;if(2===e.button){var a=o.toObject(["employee_id","employee_name","floor_id","employee_department"]);P.$emit("employee_id",a.employee_id),P.$emit("employee_name",a.employee_name),P.$emit("floor_id",a.floor_id),P.$emit("employee_department",a.employee_department),t.getEmployeeDialog()}}),n[e].on("mousedblclick",function(e){t.getChangeSeatDialog()}),t.floorCanvas.on("object:scaling",r),t.floorCanvas.add(n[e]),a.push(n[e]),t.floorCanvas.renderAll()},n=0;n<=this.vacantnumber-1;n++)l(n);this.floorCanvas.renderAll(),console.log("전체층의 자리 맵 size = "+this.eachFloorSeatMap.size),console.log(this.currentSelectedFloor+"의 자리 리스트 length = "+a.length),P.$emit("eachFloorSeatList",a)},setVacantSeat:function(e){console.log(this.eachEmployeeSeatMap.size+"맵의 사이즈입니다.");var t=this.getEachFloorSeatList(this.currentSelectedFloor),o=this.getEachEmployeeSeatList(e.employee_id),a=this.floorCanvas.getActiveObject();a.employee_name=e.name,a.employee_department=e.department,a.employee_number=e.number,a.employee_id=e.employee_id,a.item(0).set("fill",this.getColor(a.employee_department)),a._objects[1].text=e.name,this.floorCanvas.renderAll(),P.$emit("eachFloorSeatList",t),o.push(a),P.$emit("eachEmployeeSeatMap",this.eachEmployeeSeatMap),console.log(this.eachEmployeeSeatMap.size+"맵의 사이즈입니다.");var l=a.toObject(["seatId","employee_id","floor_id"]);console.log(l.employee_id+"의 자리 리스트 개수는 "+this.getEachEmployeeSeatList(l.employee_id).length+"입니다.")},
/*!!!!!!!!!!!!!!!axios 관련 코드 app.vue에 다 옮길 예정!!!!!!!!!!!!!!!
    seat VM , employee VM 만 보고 view(component) 다루기위함 */
clickSaveBtn:function(){if(this.allFloorItems)for(var e=0;e<this.allFloorItems.length;e++){var t=this.getEachFloorSeatList(this.allFloorItems[e].floor_name);if(t.length>0){console.log(t.length+this.allFloorItems[e].floor_name+"층의 자리 개수입니다.");for(var o=0;o<t.length;o++){var a=t[o].toObject(["seatId","floor_id","left","top","employee_department","employee_id","width","height","scaleX","scaleY"]),l={};l.seat_id=a.seatId,l.floor=a.floor_id,l.x=a.left,l.y=a.top,l.is_group=!1,l.group_id=null,l.building_id="HANCOM01",l.employee_id=a.employee_id,l.width=a.width*a.scaleX,l.height=a.height*a.scaleY,l.scaleX=t[o].scaleX,l.scaleY=t[o].scaleY,l.degree=t[o].angle,l.shape_id="1",this.saveByAxios(l,"seats")}}}if(this.allFloorItems)for(var n=0;n<this.allFloorItems.length;n++){var i={};i.floor_name=this.allFloorItems[n].floor_name,i.building_id=this.allFloorItems[n].building_id,i.floor_index=this.allFloorItems[n].floor_index,console.log(i),this.saveByAxios(i,"floors")}},saveByAxios:function(e,t){n.a.post("http://172.30.1.50:8081/"+t,f()(e),{headers:{"Content-Type":"application/json"}}).then(function(e){console.log(e.data)})},clickLoadBtn:function(){for(var e=null,t=null,o=null,a=0;a<this.seats.length;a++)this.seats[a].floor==this.currentSelectedFloor?(e=this.getEachFloorSeatList(this.currentSelectedFloor),t=this.getEachEmployeeSeatList(this.seats[a].employee_id),o=this.makeGroupInfo(this.seats[a]),this.floorCanvas.add(o),e.push(o),t.push(o),P.$emit("eachEmployeeSeatMap",this.eachEmployeeSeatMap),console.log(this.eachEmployeeSeatMap.size+"악시오스로 가지온 직원 수입니다."),console.log(this.seats[a].employee_id+"의 자리 리스트 개수는 "+this.getEachEmployeeSeatList(this.seats[a].employee_id).length+"입니다.")):this.seat[a].floor!=this.currentSelectedFloor&&(e=this.getEachFloorSeatList(this.seat[a].floor),t=this.getEachEmployeeSeatList(this.seats[a].employee_id),o=this.makeGroupInfo(this.seats[a]),e.push(o),t.push(o),P.$emit("eachEmployeeSeatMap",this.eachEmployeeSeatMap),console.log(this.eachEmployeeSeatMap.size+"악시오스로 가지온 직원 수입니다."),console.log(this.seats[a].employee_id+"의 자리 리스트 개수는 "+this.getEachEmployeeSeatList(this.seats[a].employee_id).length+"입니다.")),e=this.getEachFloorSeatList(this.currentSelectedFloor),P.$emit("eachFloorSeatList",e)},getEmployeeObjcet:function(e){for(var t=new Array,o={},a=0;a<this.employees.length;a++){var l={};l.name=this.employees[a].name,l.department=this.employees[a].department,l.number=this.employees[a].number,l.employee_id=this.employees[a].employee_id,t.push(l)}if(console.log(t),null==e){var n={name:null,department:null,number:null};o=n}else for(var i=0;i<t.length;i++)e==t[i].employee_id&&(o=t[i]);return console.log(o),o},makeGroupInfo:function(e){var t=this,o=this.getEmployeeObjcet(e.employee_id),a=new fabric.Rect({width:e.width,height:e.height,fill:this.getColor(o.department),opacity:1}),l=null;l=null==e.employee_id?new fabric.IText("",{left:0,top:a.height/3,fontSize:13,fill:"black"}):new fabric.IText(o.name,{left:0,top:a.height/3,fontSize:13,fill:"black"});var n=new fabric.Group([a,l],{seatId:e.seat_id,employee_name:o.name,employee_department:o.department,employee_number:o.number,employee_id:e.employee_id,floor_id:e.floor,left:e.x,top:e.y,angle:e.degree});return n.on("mousedown",function(e){var o=e.target;if(2===e.button){var a=o.toObject(["employee_id","employee_name","floor_id","employee_department"]);P.$emit("employee_id",a.employee_id),P.$emit("employee_name",a.employee_name),P.$emit("floor_id",a.floor_id),P.$emit("employee_department",a.employee_department),t.getEmployeeDialog()}}),n.on("mousedblclick",function(e){t.getChangeSeatDialog()}),n}}},C={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("canvas",{ref:"canvas",staticClass:"canvas",staticStyle:{"text-align":"center"},attrs:{width:"950px",height:"800px"}}),e._v(" "),o("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"inputUpload",attrs:{type:"file"},on:{change:e.onFileChange}}),e._v(" "),o("v-btn",{attrs:{color:"success"},on:{click:function(t){return e.$refs.inputUpload.click()}}},[e._v("File Upload to Background")]),e._v(" "),o("v-menu",{scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,l=t.attrs;return[o("v-btn",e._g(e._b({},"v-btn",l,!1),a),[e._v("Multiple")])]}}])},[e._v(" "),o("v-list",e._l(e.items,function(t,a){return o("v-list-item",{key:a,on:{click:function(o){return e.multipleVacant(t.number)}}},[o("v-list-item-title",[e._v(e._s(t.number))])],1)}),1)],1),e._v(" "),o("v-btn",{attrs:{color:"primary",dark:""},on:{click:e.test}},[e._v("test")]),e._v(" "),o("v-btn",{attrs:{color:"primary",dark:""},on:{click:e.addVacantBtn}},[e._v("Add Vacant")]),e._v(" "),o("v-btn",{on:{click:e.deleteBtn}},[e._v("Delete Selected Shape")]),e._v(" "),o("v-btn",{on:{click:e.deleteAllBtn}},[e._v("Delete All Shapes")]),e._v(" "),o("v-btn",{on:{click:e.clickSaveBtn}},[e._v("Save Canvas")]),e._v(" "),o("v-btn",{on:{click:e.clickLoadBtn}},[e._v("Load Canvas")]),e._v(" "),o("v-btn",{on:{click:e.clickChangeToVacant}},[e._v("Change to Vacant")]),e._v(" "),o("v-btn",{attrs:{color:"pink"},on:{click:e.clickResetToRatio}},[e._v("Reset Ratio")]),e._v(" "),o("EmployeeDialog",{attrs:{dialogStatus:this.employeeDialogStatus},on:{close:e.closeEmployeeDialog}}),e._v(" "),o("ChangeSeatDialog",{attrs:{dialogStatus:this.changeSeatDialogStatus},on:{close:e.closeChangeSeatDialog}})],1)},staticRenderFns:[]};var x=o("VU/8")(E,C,!1,function(e){o("2WXQ")},"data-v-59fe1078",null).exports,L={props:{dialogStatus:{type:Boolean}},data:function(){return{floor:null}},created:function(){var e=this;P.$on("initFloor",function(t){e.floor=t})},computed:{dialog:function(){return this.dialogStatus}},methods:{confirm:function(){null!=this.floor&&(P.$emit("floorInfo",this.floor),P.$emit("confirm"))}}},w={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-dialog",{attrs:{"max-width":"290",value:e.dialog,persistent:""}},[o("v-form",{ref:"form",attrs:{"lazy-validation":""}},[o("v-card",[o("v-card-title",[o("span",{staticClass:"headline"},[e._v("Add Floor")])]),e._v(" "),o("v-text-field",{attrs:{label:"Floor",required:""},model:{value:e.floor,callback:function(t){e.floor=t},expression:"floor"}}),e._v(" "),o("v-card-actions",[o("v-spacer"),e._v(" "),o("v-btn",{on:{click:e.confirm}},[e._v("Confirm")]),e._v(" "),o("v-btn",{on:{click:function(t){return e.$emit("close")}}},[e._v("Close")])],1)],1)],1)],1)},staticRenderFns:[]},I={props:["floor"],components:{AddFloorDialog:o("VU/8")(L,w,!1,null,null,null).exports},data:function(){return{floorNum:null,dialogStatus:!1,inputFloor:null,seatFloor:null,floors:this.floor.sort(function(e,t){return e.floor_index<t.floor_index?-1:e.floor_index>t.floor_index?1:0}),length:this.floor.length,initData:null}},created:function(){var e=this,t=this.floors;P.$emit("allFloorItems",t),P.$on("confirm",function(){e.confirmDialog()}),P.$on("floorInfo",function(t){e.inputFloor=t}),P.$on("showSeatFloor",function(t){e.seatFloor=t,console.log(e.seatFloor+"가 넘어온 자리 층입니다");for(var o=0;o<e.floors.length;o++)e.seatFloor==e.floors[o].floor_name&&(e.floorNum=o,e.setFloor(e.floors[e.floorNum].floor_name))})},beforeUpdate:function(){this.initData&&0!=this.length?this.setFloor(this.floors[this.floorNum].floor_name):(this.floors=this.floor.sort(function(e,t){return e.floor_index<t.floor_index?-1:e.floor_index>t.floor_index?1:0}),this.length=this.floor.length,this.initData="yes")},watch:{length:function(e){var t=this.floors;this.floorNum=e-1,P.$emit("allFloorItems",t),console.log(this.length)}},methods:{decreaseTab:function(){console.log(this.length),this.length--,this.floorNum=this.length-1,0==this.length?this.setFloor(null):this.setFloor(this.floors[this.floorNum].floor_name),console.log(this.length)},increaseTab:function(){this.length++,this.floorNum=this.length+1,!this.dialogStatus&&this.inputFloor&&this.setFloor(this.inputFloor)},getDialog:function(){P.$emit("initFloor",null),this.dialogStatus=!0,console.log(this.dialogStatus)},confirmDialog:function(){console.log("<<<confirm dialog>>>"),this.dialogStatus=!1,console.log(this.dialogStatus),console.log(this.inputFloor+"from add floor dialog"),this.floors.push({floor_name:this.inputFloor,building_id:"HANCOM01",floor_index:this.floors.length}),this.increaseTab(),console.log(this.length)},closeDialog:function(){console.log("<<<close dialog>>>"),this.dialogStatus=!1,console.log(this.dialogStatus)},removeFloor:function(){if(this.length>0){var e=this.floors[this.floorNum].floor_name,t=this.floors.findIndex(function(t){return t.floor_name==e});t>-1&&this.floors.splice(t,1),this.decreaseTab()}else alert("there are no seats to delete!")},setFloor:function(e){P.$emit("changeFloor",e)}}},k={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("v-card",[o("v-card-text",{staticClass:"text-center"},[o("v-btn",{attrs:{text:""},on:{click:e.removeFloor}},[e._v("Remove Floor")]),e._v(" "),o("v-divider",{staticClass:"mx-4",attrs:{vertical:""}}),e._v(" "),o("v-btn",{attrs:{text:""},on:{click:e.getDialog}},[e._v("Add Floor")]),e._v(" "),o("v-divider",{staticClass:"mx-4",attrs:{vertical:""}}),e._v(" "),o("v-btn",{attrs:{text:""}},[e._v("Edit Floor name")])],1),e._v(" "),o("v-tabs",{attrs:{"background-color":"cyan",dark:""},model:{value:e.floorNum,callback:function(t){e.floorNum=t},expression:"floorNum"}},e._l(this.floors,function(t){return o("v-tab",{key:t.floor_name,on:{change:function(o){return e.setFloor(t.floor_name)}}},[e._v("\n        "+e._s(t.floor_name))])}),1)],1),e._v(" "),o("AddFloorDialog",{attrs:{dialogStatus:this.dialogStatus},on:{close:e.closeDialog}})],1)},staticRenderFns:[]},D=o("VU/8")(I,k,!1,null,null,null).exports,$={data:function(){return{search:"",headers:[{text:"Name",align:"start",sortable:!0,value:"name"},{text:"Department",value:"department"},{text:"Floor",value:"floor_id"},{text:"",value:"showSeatButton"}],seats:[]}},created:function(){var e=this;P.$on("showSeatDataTable",function(t){e.renderEachEmployeeSeatList(t)})},methods:{showSeatButtonClicked:function(e){console.log(e),P.$emit("showSeat",e),P.$emit("showSeatFloor",e.floor_id)},renderEachEmployeeSeatList:function(e){this.seats=[];var t=e.seatIdList;if(t)for(var o=0;o<t.length;o++){var a={},l=t[o].toObject(["seatId","employee_id","floor_id"]);a.seat_id=l.seatId+"번",a.employee_id=l.employee_id,a.name=e.name,a.department=e.department,a.floor_id=l.floor_id,console.log(a.seat_id+"입니다."),this.seats.push(a)}}}},A={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-card",[o("v-card-title",[o("v-spacer"),e._v(" "),o("v-text-field",{attrs:{"single-line":"","hide-details":""}})],1),e._v(" "),o("v-data-table",{attrs:{headers:e.headers,items:e.seats,search:e.search,height:"265px"},scopedSlots:e._u([{key:"item",fn:function(t){return[o("tr",[o("td",[e._v(e._s(t.item.name))]),e._v(" "),o("td",[e._v(e._s(t.item.department))]),e._v(" "),o("td",[e._v(e._s(t.item.floor_id))]),e._v(" "),o("td",[o("v-btn",{attrs:{id:"showSeatButton"},on:{click:function(o){return e.showSeatButtonClicked(t.item)}}},[e._v("Show")])],1)])]}}])})],1)},staticRenderFns:[]};var M=o("VU/8")($,A,!1,function(e){o("n2IG")},"data-v-da4cc6c4",null).exports,T={data:function(){return{headers:[{text:"Name",align:"start",sortable:!0,value:"name"},{text:"Department",value:"department"},{text:"Number",value:"number"}],employees:[],currentFloorSeatsLength:0,currentFloorVacantSeatsLength:0,currentFloor:null}},created:function(){var e=this;P.$on("eachFloorSeatList",function(t){e.renderEachFloorSeatList(t)}),P.$on("changeFloor",function(t){e.currentFloor=t})},methods:{getColor:function(e){return console.log("부서는"+e),"부서1"==e?"orange":"부서2"==e?"yellow":"부서3"==e?"green":"gray"},renderEachFloorSeatList:function(e){if(this.employees=[],this.currentFloorVacantSeatsLength=0,0!=e.length)for(var t=0;t<e.length;t++){null==e[t].employee_id&&(console.log(e[t].seatId+"빈공석의 seatId입니다"),this.currentFloorVacantSeatsLength++);var o={};o.name=e[t].employee_name,o.department=e[t].employee_department,o.number=e[t].employee_number,this.employees.push({name:o.name,department:o.department,number:o.number}),this.currentFloorSeatsLength=this.employees.length,console.log(o.number)}else this.currentFloorSeatsLength=0}}},j={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-card",[o("v-card-title",[o("v-spacer",[e._v(e._s(this.currentFloor)+" "+e._s(this.currentFloorVacantSeatsLength)+"좌석 /\n      "+e._s(this.currentFloorSeatsLength)+"좌석\n    ")])],1),e._v(" "),o("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.employees,height:"775px"},scopedSlots:e._u([{key:"item.department",fn:function(t){var a=t.item;return[o("v-chip",{attrs:{color:e.getColor(a.department),dark:""}},[e._v(e._s(a.department))])]}}],null,!0)})],1)},staticRenderFns:[]},V=o("VU/8")(T,j,!1,null,null,null).exports,B={name:"Admin",components:{AllFloorsDataTable:m,AttachCanvas:x,FloorTabs:D,EachFloorDataTable:V,EachEmployeeSeatDataTable:M},data:function(){return{msg:"This is hyori page.",floorMsg:"Choose Floor",searchEmployeeMsg:"Search Employee",changeText:"Sample Text",selected:"",employees:[],seats:[],floors:[]}},created:function(){this.employees=this.getEmployees(),this.seats=this.getSeats(),this.floors=this.getFloors()},methods:{getEmployees:function(){var e=new Array;return n.a.get("http://172.30.1.50:8081/employee").then(function(t){for(var o=0;o<t.data.length;o++){var a={};a.name=t.data[o].employee_name,a.department=t.data[o].department_name,a.number=t.data[o].extension_number,a.employee_id=t.data[o].employee_id,a.seatIdList=t.data[o].seatList,e.push(a)}}),e},getSeats:function(){var e=new Array;return n.a.get("http://172.30.1.50:8081/seats").then(function(t){for(var o=0;o<t.data.length;o++){var a={};a.seat_id=t.data[o].seat_id,a.floor=t.data[o].floor,a.x=t.data[o].x,a.y=t.data[o].y,a.is_group=t.data[o].is_group,a.building_id=t.data[o].building_id,a.employee_id=t.data[o].employee_id,a.width=t.data[o].width,a.height=t.data[o].height,a.degree=t.data[o].degree,a.shape_id=t.data[o].shape_id,e.push(a)}}),e},getFloors:function(){var e=new Array;return n.a.get("http://172.30.1.50:8081/floors").then(function(t){for(var o=0;o<t.data.length;o++){var a={};a.floor_name=t.data[o].floor_name,a.building_id=t.data[o].building_id,a.floor_index=t.data[o].floor_index,e.push(a)}}),e}}},O={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"hanzari",attrs:{id:"hanzari"}},[o("div",{staticClass:"d1",attrs:{id:"d1"}},[o("div",{staticClass:"search",attrs:{id:"search"}},[o("AllFloorsDataTable",{attrs:{employee:e.employees}}),e._v(" "),o("EachEmployeeSeatDataTable")],1)]),e._v(" "),o("div",{staticClass:"d3",attrs:{id:"hr"}}),e._v(" "),o("div",{staticClass:"d2",attrs:{id:"d2"}},[o("AttachCanvas",{attrs:{seat:e.seats,employee:e.employees}}),e._v(" "),o("FloorTabs",{attrs:{floor:e.floors}})],1),e._v(" "),o("div",{staticClass:"d3",attrs:{id:"hr"}}),e._v(" "),o("div",{staticClass:"d4",attrs:{id:"d4"}},[o("div",{staticClass:"listview",attrs:{id:"listview"}},[o("EachFloorDataTable")],1)])])},staticRenderFns:[]};var X=o("VU/8")(B,O,!1,function(e){o("7duE")},"data-v-7e450ef6",null).exports,z={name:"Manager",components:{AllFloorsDataTable:m,AttachCanvas:x,FloorTabs:D,EachFloorDataTable:V,EachEmployeeSeatDataTable:M},data:function(){return{msg:"This is hyori page.",floorMsg:"Choose Floor",searchEmployeeMsg:"Search Employee",changeText:"Sample Text",selected:"",employees:[],seats:[]}},created:function(){this.employees=this.getEmployees(),this.seats=this.getSeats()},methods:{updateText:function(){this.changeText="Click Event Test"},getEmployees:function(){var e=new Array;return n.a.get("http://172.30.1.50:8080/employee").then(function(t){for(var o=0;o<t.data.length;o++){var a={};a.name=t.data[o].employee_name,console.log(a.name+"???? employee ?? name"),a.department=t.data[o].department_name,a.number=t.data[o].extension_number,a.employee_id=t.data[o].employee_id,a.seatIdList=t.data[o].seatList,console.log(a.seatIdList),e.push(a)}console.log("employee length"+e.length)}),e},getSeats:function(){var e=new Array;return n.a.get("http://172.30.1.50:8080/seats").then(function(t){for(var o=0;o<t.data.length;o++){var a={};a.seat_id=t.data[o].seat_id,a.floor=t.data[o].floor,a.x=t.data[o].x,a.y=t.data[o].y,a.is_group=t.data[o].is_group,a.building_id=t.data[o].building_id,a.employee_id=t.data[o].employee_id,a.width=t.data[o].width,a.height=t.data[o].height,a.degree=t.data[o].degree,a.shape_id=t.data[o].shape_id,e.push(a),console.log("loadSeatList length"+e.length)}}),e}}},R={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"hanzari",attrs:{id:"hanzari"}},[o("div",{staticClass:"d1",attrs:{id:"d1"}},[o("div",{staticClass:"search",attrs:{id:"search"}},[o("AllFloorsDataTable",{attrs:{employee:e.employees}}),e._v(" "),o("EachEmployeeSeatDataTable")],1)]),e._v(" "),o("div",{staticClass:"d3",attrs:{id:"hr"}}),e._v(" "),o("div",{staticClass:"d2",attrs:{id:"d2"}},[o("AttachCanvas",{attrs:{seat:e.seats,employee:e.employees}}),e._v(" "),o("FloorTabs")],1),e._v(" "),o("div",{staticClass:"d3",attrs:{id:"hr"}}),e._v(" "),o("div",{staticClass:"d4",attrs:{id:"d4"}},[o("div",{staticClass:"listview",attrs:{id:"listview"}},[o("EachFloorDataTable")],1)])])},staticRenderFns:[]};var Y=o("VU/8")(z,R,!1,function(e){o("ybrd")},"data-v-038e6e9c",null).exports,U={name:"Viewer",components:{AllFloorsDataTable:m,AttachCanvas:x,FloorTabs:D,EachFloorDataTable:V,EachEmployeeSeatDataTable:M},data:function(){return{msg:"This is hyori page.",floorMsg:"Choose Floor",searchEmployeeMsg:"Search Employee",changeText:"Sample Text",selected:"",employees:[],seats:[]}},created:function(){this.employees=this.getEmployees(),this.seats=this.getSeats()},methods:{updateText:function(){this.changeText="Click Event Test"},getEmployees:function(){var e=new Array;return n.a.get("http://172.30.1.50:8080/employee").then(function(t){for(var o=0;o<t.data.length;o++){var a={};a.name=t.data[o].employee_name,console.log(a.name+"???? employee ?? name"),a.department=t.data[o].department_name,a.number=t.data[o].extension_number,a.employee_id=t.data[o].employee_id,a.seatIdList=t.data[o].seatList,console.log(a.seatIdList),e.push(a)}console.log("employee length"+e.length)}),e},getSeats:function(){var e=new Array;return n.a.get("http://172.30.1.50:8080/seats").then(function(t){for(var o=0;o<t.data.length;o++){var a={};a.seat_id=t.data[o].seat_id,a.floor=t.data[o].floor,a.x=t.data[o].x,a.y=t.data[o].y,a.is_group=t.data[o].is_group,a.building_id=t.data[o].building_id,a.employee_id=t.data[o].employee_id,a.width=t.data[o].width,a.height=t.data[o].height,a.degree=t.data[o].degree,a.shape_id=t.data[o].shape_id,e.push(a),console.log("loadSeatList length"+e.length)}}),e}}},N={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"hanzari",attrs:{id:"hanzari"}},[o("div",{staticClass:"d1",attrs:{id:"d1"}},[o("div",{staticClass:"search",attrs:{id:"search"}},[o("AllFloorsDataTable",{attrs:{employee:e.employees}}),e._v(" "),o("EachEmployeeSeatDataTable")],1)]),e._v(" "),o("div",{staticClass:"d3",attrs:{id:"hr"}}),e._v(" "),o("div",{staticClass:"d2",attrs:{id:"d2"}},[o("AttachCanvas",{attrs:{seat:e.seats,employee:e.employees}}),e._v(" "),o("FloorTabs")],1),e._v(" "),o("div",{staticClass:"d3",attrs:{id:"hr"}}),e._v(" "),o("div",{staticClass:"d4",attrs:{id:"d4"}},[o("div",{staticClass:"listview",attrs:{id:"listview"}},[o("EachFloorDataTable")],1)])])},staticRenderFns:[]};var G=o("VU/8")(U,N,!1,function(e){o("tMBF")},"data-v-2843c332",null).exports;a.default.use(r.a),a.default.use(h.a);var H=new r.a({mode:"history",routes:[{path:"/hyoriTest",name:"Admin",component:X},{path:"/YujinTest",name:"Manager",component:Y},{path:"/yunjiTest",name:"Viewer",component:G}]}),W=o("3EgV"),q=o.n(W);o("7zck");o.d(t,"eventBus",function(){return P});var P=new a.default;a.default.prototype.$axios=n.a,a.default.use(q.a),new a.default({el:"#app",router:H,components:{App:s},template:"<App/>",vuetify:new q.a})},n2IG:function(e,t){},tMBF:function(e,t){},ybrd:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.8fef4e6b6b549bcc0d3d.js.map